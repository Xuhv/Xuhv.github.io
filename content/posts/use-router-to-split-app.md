---
title: "使用路由分割APP"
date: 2022-10-04T04:27:23+08:00
showToc: true
categories:
  - front-end
series:
  - vue
---

我很烦的一件事就是在某些屎山项目里找代码, 即使编辑器的辅助功能已经非常强大多花不了多少时间, 但真遇到了还是本能得厌恶. 典型的有

1. 无数个路由写尼玛一个文件里

2. 一个SFC写上两千行

3. 整个项目都anyscript, 直接把编辑器跳转功能干废

这里只针对 1. 提出一个我觉得比较合理的写法: "模块化", 使用路由分割应用逻辑

所谓"模块化", 其实就是把路由表按组分拆到页面去, 比如我的应用有如下的大几十个页面
```
系统管理-系统设置
系统管理-在线设置
系统管理-组织设置
项目管理-项目
项目管理-人员
...
```
那我们就不应当把他们全平铺在router.ts文件中, 而是针对"系统管理", "项目管理"等模块, 在其目录下新建一个路由表, 这样查看代码的时候也方便知道那个页面是什么玩意儿, 写在哪的. (什么, 你跟我说你相关逻辑散在views, components各个文件夹? mdzz, 这个话题针对就是你们这种人才.) 似乎计算机组成原理课程上, 有个`局部性`的概念, 这玩意儿也类似的, 可能要常用的代码, 不应该放近点吗?

这样写还有个好处就是控制编译出的代码文件, 通过这种方式, 我们可以很轻易地通过每个模块的路由表来控制chunk, 需要代码分割, 异步加载这个路由表呗, 如果你的应用权限是按模块来的, 那直接鉴权都一起做了, 都不需要的话那就直接插到router.ts就好了, 某个页面实在大到咬人, 那就在路由表里把这个页面也给异步加载了呗. 至于为啥不全部异步, 嗯, 当然可以, 如果你愿意.
